# FlashBill ä¸»é¢˜ç ”å‘æ‰‹å†Œ

## 1. å¼ºçº¦æŸ

1. **ä¸ä¿®æ”¹ä¸šåŠ¡è„šæœ¬è¡Œä¸º**ï¼š`static/js/**` çš„ä¸šåŠ¡é€»è¾‘ä¸å¾—å› ä¸»é¢˜å˜åŒ–è€Œæ”¹å˜ã€‚
2. **ä¸»é¢˜åŒ…åªå…è®¸** `manifest.json` + `theme.css`ï¼Œä¸å…è®¸æ³¨å…¥ JSã€‚
3. **ä¸æ”¹æ¨¡æ¿ç»“æ„**ï¼šä¸»é¢˜é€šè¿‡ CSS å˜é‡è¦†ç›–å’Œé€‰æ‹©å™¨è¦†ç›–ï¼Œä¸è¦æ±‚æ”¹åŠ¨ HTMLã€‚
4. **ä¸»é¢˜åˆ‡æ¢åªæ”¹å˜è§†è§‰**ï¼šAPIã€ç­›é€‰ã€å¯¼å…¥ã€å›¾è¡¨æ•°æ®é€»è¾‘å¿…é¡»å®Œå…¨ä¸€è‡´ã€‚
5. **é™æ€èµ„æºå¿…é¡»æœ¬åœ°åŒ–**ï¼šå­—ä½“ã€å›¾ç‰‡ç­‰æ‰€æœ‰èµ„æºå¿…é¡»æ”¾åœ¨ä¸»é¢˜ç›®å½•å†…ï¼Œé€šè¿‡ç›¸å¯¹è·¯å¾„å¼•ç”¨ã€‚ç¦æ­¢ä½¿ç”¨ Google Fontsã€CDN ç­‰å¤–éƒ¨ URLï¼Œç³»ç»Ÿéœ€ä¿è¯ç¦»çº¿å¯ç”¨ã€‚

## 2. æ–‡ä»¶ç»“æ„

```
static/themes/<your-theme-id>/
â”œâ”€â”€ manifest.json      # ä¸»é¢˜å…ƒæ•°æ®
â””â”€â”€ theme.css          # ä¸»é¢˜æ ·å¼ï¼ˆCSS å˜é‡ + ç»„ä»¶è¦†ç›–ï¼‰
```

## 3. manifest.json è§„èŒƒ

```json
{
  "id": "your-theme-id",
  "name": "ä¸»é¢˜æ˜¾ç¤ºå",
  "description": "ä¸»é¢˜è¯´æ˜",
  "author": "ä½œè€…",
  "version": "1.0.0",
  "mode": "dark",
  "order": 30,
  "stylesheet": "themes/your-theme-id/theme.css"
}
```

| å­—æ®µ | å¿…å¡« | è¯´æ˜ |
|---|---|---|
| `id` | æ˜¯ | å”¯ä¸€æ ‡è¯†ï¼Œä¸ç›®å½•åä¸€è‡´ |
| `name` | æ˜¯ | å·¦ä¸Šè§’åˆ‡æ¢å™¨å±•ç¤ºå |
| `mode` | æ˜¯ | `light` æˆ– `dark`ï¼Œç”¨äºè§¦å‘ Element Plus æš—è‰²å˜é‡ |
| `order` | å¦ | æ’åºå€¼ï¼Œè¶Šå°è¶Šé å‰ï¼ˆé»˜è®¤ 1000ï¼‰ |
| `stylesheet` | æ˜¯ | ä¸»é¢˜ CSS ç›¸å¯¹ `static/` çš„è·¯å¾„ |

## 4. è¿è¡Œæœºåˆ¶

1. åç«¯ `core/themes.py` è‡ªåŠ¨æ‰«æ `static/themes/*/manifest.json`ï¼Œæ³¨å…¥ `theme_registry` åˆ°æ¨¡æ¿ã€‚
2. å‰ç«¯ `theme-manager.js` è´Ÿè´£ï¼š
   - é¦–å±è¯»å– `localStorage` å¹¶ç«‹å³è®¾ç½® `html[data-theme="<id>"]` + `html.dark`ï¼ˆå½“ `mode=dark`ï¼‰ã€‚
   - åŠ¨æ€æ›´æ–° `#app-theme-style` çš„ `href` æŒ‡å‘ä¸»é¢˜ CSSã€‚
   - å¡«å……å·¦ä¸Šè§’ä¸‹æ‹‰èœå•ï¼Œåˆ‡æ¢æ—¶æ´¾å‘ `app:theme-change` äº‹ä»¶ã€‚
3. ä¸»é¢˜ CSS ä»¥ `<link>` æ–¹å¼**æœ€ååŠ è½½**ï¼Œä¼˜å…ˆçº§é«˜äº `style.css` å’Œ `pages/*.css`ã€‚

## 5. theme.css ç¼–å†™è§„åˆ™

### 5.1 å…¥å£é€‰æ‹©å™¨

```css
html[data-theme='your-theme-id'] {
    color-scheme: dark; /* æˆ– light */
    --bg-color: ...;
    --text-color: ...;
    /* ... è¦†ç›–ä¸‹æ–¹åˆ—å‡ºçš„ CSS å˜é‡ */
}
```

### 5.2 å¿…é¡»è¦†ç›–çš„ CSS å˜é‡ï¼ˆå®Œæ•´æ¸…å•ï¼‰

ä»¥ä¸‹å˜é‡åœ¨ `:root`ï¼ˆ`style.css`ï¼‰ä¸­å®šä¹‰äº† light é»˜è®¤å€¼ã€‚**æ‰€æœ‰å˜é‡éƒ½å¿…é¡»åœ¨ä¸»é¢˜ä¸­è¦†ç›–**ï¼Œå¦åˆ™ä¼šå›é€€åˆ° light åŸºçº¿ã€‚

#### å…¨å±€åŸºç¡€

| å˜é‡ | è¯´æ˜ |
|---|---|
| `--bg-color` | é¡µé¢èƒŒæ™¯è‰² |
| `--bg-color-secondary` | æ¬¡çº§èƒŒæ™¯è‰² |
| `--text-color` | ä¸»æ–‡æœ¬è‰² |
| `--text-color-secondary` | æ¬¡çº§æ–‡æœ¬è‰² |
| `--border-color` | è¾¹æ¡†è‰² |
| `--shadow-color` | é˜´å½±è‰² |
| `--text-muted-color` | é™é»˜/è¾…åŠ©æ–‡æœ¬è‰² |
| `--font-primary` | å…¨å±€å­—ä½“æ ˆï¼ˆå¯é€šè¿‡ `@import` å¼•å…¥ Google Fonts ç­‰å¤–éƒ¨å­—ä½“åè¦†ç›–ï¼‰ |
| `--el-font-family` | Element Plus å­—ä½“ï¼ˆé€šå¸¸è®¾ä¸º `var(--font-primary)`ï¼‰ |

#### ä¸»é¢˜é€‰æ‹©å™¨ï¼ˆå·¦ä¸Šè§’ï¼‰

| å˜é‡ | è¯´æ˜ |
|---|---|
| `--theme-picker-border` | é€‰æ‹©å™¨è¾¹æ¡†è‰² |
| `--theme-picker-shadow` | é€‰æ‹©å™¨é˜´å½± |
| `--theme-picker-text` | é€‰æ‹©å™¨æ–‡æœ¬è‰² |
| `--theme-picker-bg` | é€‰æ‹©å™¨èƒŒæ™¯è‰² |

#### å¯¼èˆªå²›å±¿

| å˜é‡ | è¯´æ˜ |
|---|---|
| `--nav-island-bg` | å²›å±¿èƒŒæ™¯è‰² |
| `--nav-island-border` | å²›å±¿è¾¹æ¡†ï¼ˆå« border ç®€å†™ï¼‰ |
| `--nav-island-shadow` | å²›å±¿é˜´å½± |
| `--island-logo-text` | Logo æ–‡æœ¬è‰² |
| `--island-logo-bg` | Logo èƒŒæ™¯è‰² |
| `--island-logo-shadow` | Logo é˜´å½± |
| `--island-menu-bg` | èœå•å²›èƒŒæ™¯ |
| `--island-menu-shadow` | èœå•å²›é˜´å½± |
| `--island-menu-border-top` | èœå•å²›é¡¶éƒ¨è¾¹æ¡† |
| `--island-info-bg` | ä¿¡æ¯å²›èƒŒæ™¯ |
| `--island-info-shadow` | ä¿¡æ¯å²›é˜´å½± |
| `--island-info-border-top` | ä¿¡æ¯å²›é¡¶éƒ¨è¾¹æ¡† |
| `--island-theme-bg` | ä¸»é¢˜åˆ‡æ¢æŒ‰é’®èƒŒæ™¯ |
| `--island-theme-color` | ä¸»é¢˜åˆ‡æ¢æŒ‰é’®é¢œè‰² |
| `--island-theme-shadow` | ä¸»é¢˜åˆ‡æ¢æŒ‰é’®é˜´å½± |
| `--island-theme-border` | ä¸»é¢˜åˆ‡æ¢æŒ‰é’®è¾¹æ¡† |
| `--island-theme-hover-shadow` | ä¸»é¢˜åˆ‡æ¢æŒ‰é’®æ‚¬åœé˜´å½± |
| `--theme-toggle-btn-color` | ä¸»é¢˜åˆ‡æ¢å›¾æ ‡è‰² |
| `--nav-link-active-bg` | å¯¼èˆªé“¾æ¥æ¿€æ´»æ€èƒŒæ™¯ |

#### å¡ç‰‡ / è¡¨æ ¼ / æ—¶é—´çº¿

| å˜é‡ | è¯´æ˜ |
|---|---|
| `--app-card-shadow` | å¡ç‰‡é€šç”¨é˜´å½± |
| `--app-card-border-top` | å¡ç‰‡é¡¶éƒ¨è¾¹æ¡† |
| `--timeline-dot-shadow` | æ—¶é—´çº¿åœ†ç‚¹é˜´å½± |
| `--timeline-item-bg` | æ—¶é—´çº¿é¡¹èƒŒæ™¯ |
| `--timeline-item-hover-shadow` | æ—¶é—´çº¿é¡¹æ‚¬åœé˜´å½± |
| `--text-selection-popup-shadow` | é€‰ä¸­å¼¹çª—é˜´å½± |
| `--table-header-text-color` | è¡¨å¤´æ–‡æœ¬è‰² |
| `--table-row-hover-bg-color` | è¡¨æ ¼è¡Œæ‚¬åœèƒŒæ™¯ |
| `--table-text-color-regular` | è¡¨æ ¼å¸¸è§„æ–‡æœ¬è‰² |
| `--table-text-color-primary` | è¡¨æ ¼ä¸»æ–‡æœ¬è‰² |

#### é¦–é¡µ

| å˜é‡ | è¯´æ˜ |
|---|---|
| `--home-default-category-color` | é»˜è®¤åˆ†ç±»é¢œè‰² |
| `--home-default-book-color` | é»˜è®¤è´¦æœ¬é¢œè‰² |
| `--home-quota-fallback-1/2/3` | é…é¢ä»ªè¡¨ç›˜å¤‡ç”¨è‰² |
| `--home-icon-tag-text` | å›¾æ ‡æ ‡ç­¾æ–‡æœ¬è‰² |
| `--home-box-card-bg-color` | é¦–é¡µä¸»å¡ç‰‡èƒŒæ™¯è‰² |
| `--home-box-card-bg-image` | é¦–é¡µä¸»å¡ç‰‡èƒŒæ™¯å›¾ï¼ˆå¯ç”¨æ¸å˜ï¼‰ |
| `--home-box-card-border` | é¦–é¡µä¸»å¡ç‰‡è¾¹æ¡† |
| `--home-summary-card-bg` | æ‘˜è¦å¡ç‰‡èƒŒæ™¯ |
| `--home-summary-card-border` | æ‘˜è¦å¡ç‰‡è¾¹æ¡† |
| `--home-summary-card-shadow` | æ‘˜è¦å¡ç‰‡é˜´å½± |
| `--home-summary-card-first-bg` | ç¬¬ä¸€å¼ æ‘˜è¦å¡èƒŒæ™¯ï¼ˆå¯ç”¨æ¸å˜ï¼‰ |
| `--home-summary-card-first-border` | ç¬¬ä¸€å¼ æ‘˜è¦å¡è¾¹æ¡† |
| `--home-summary-card-second-bg` | ç¬¬äºŒå¼ æ‘˜è¦å¡èƒŒæ™¯ |
| `--home-summary-card-second-border` | ç¬¬äºŒå¼ æ‘˜è¦å¡è¾¹æ¡† |
| `--home-duration-purple` | å¤©æ•°ç´«è‰² |
| `--home-duration-green` | ç¬”æ•°ç»¿è‰² |
| `--home-empty-text` | ç©ºçŠ¶æ€æ–‡æœ¬è‰² |
| `--home-heatmap-empty-text` | çƒ­åŠ›å›¾ç©ºçŠ¶æ€æ–‡æœ¬è‰² |
| `--home-tooltip-dot-color` | tooltip åœ†ç‚¹è‰² |
| `--home-trend-card-bg` | è¶‹åŠ¿å¡èƒŒæ™¯ |
| `--home-trend-card-border` | è¶‹åŠ¿å¡è¾¹æ¡† |
| `--home-trend-card-shadow` | è¶‹åŠ¿å¡é˜´å½± |
| `--home-trend-line-glow-strong` | è¶‹åŠ¿çº¿è¾‰å…‰ï¼ˆå¼ºï¼‰ |
| `--home-trend-line-glow-soft` | è¶‹åŠ¿çº¿è¾‰å…‰ï¼ˆå¼±ï¼‰ |
| `--home-quota-card-bg` | é…é¢å¡èƒŒæ™¯ |
| `--home-quota-card-border` | é…é¢å¡è¾¹æ¡† |
| `--home-quota-card-shadow` | é…é¢å¡é˜´å½± |
| `--home-table-card-bg` | è¡¨æ ¼å¡èƒŒæ™¯ |
| `--home-table-card-border` | è¡¨æ ¼å¡è¾¹æ¡† |
| `--home-table-card-shadow` | è¡¨æ ¼å¡é˜´å½± |

#### é¦–é¡µæ—¥å†å›¾

| å˜é‡ | è¯´æ˜ |
|---|---|
| `--home-calendar-text` | æ—¥å†æ–‡æœ¬è‰² |
| `--home-calendar-tooltip-bg` | æ—¥å† tooltip èƒŒæ™¯ |
| `--home-calendar-tooltip-border` | æ—¥å† tooltip è¾¹æ¡† |
| `--home-calendar-tooltip-text` | æ—¥å† tooltip æ–‡æœ¬è‰² |
| `--home-calendar-border` | æ—¥å†è¾¹æ¡† |
| `--home-calendar-dot-border` | æ—¥å†åœ†ç‚¹è¾¹æ¡† |

#### é¦–é¡µ ECharts å›¾è¡¨

| å˜é‡ | è¯´æ˜ |
|---|---|
| `--home-chart-text` | å›¾è¡¨æ–‡æœ¬è‰² |
| `--home-chart-axis-label` | åæ ‡è½´æ ‡ç­¾è‰² |
| `--home-chart-split-line` | åˆ†å‰²çº¿è‰² |
| `--home-chart-tooltip-bg` | å›¾è¡¨ tooltip èƒŒæ™¯ |
| `--home-chart-tooltip-border` | å›¾è¡¨ tooltip è¾¹æ¡† |
| `--home-chart-tooltip-text` | å›¾è¡¨ tooltip æ–‡æœ¬è‰² |
| `--home-chart-tooltip-shadow` | å›¾è¡¨ tooltip é˜´å½± |
| `--home-chart-axis-line-color` | åæ ‡è½´çº¿è‰² |
| `--home-chart-line-gradient-start` | æŠ˜çº¿æ¸å˜èµ·ç‚¹è‰² |
| `--home-chart-line-gradient-end` | æŠ˜çº¿æ¸å˜ç»ˆç‚¹è‰² |
| `--home-chart-line-point` | æŠ˜çº¿æ•°æ®ç‚¹è‰² |
| `--home-chart-moving-dot` | ç§»åŠ¨æŒ‡ç¤ºç‚¹è‰² |
| `--home-chart-moving-dot-border` | ç§»åŠ¨æŒ‡ç¤ºç‚¹è¾¹æ¡†è‰² |
| `--home-chart-line-shadow-color` | æŠ˜çº¿é˜´å½±è‰²ï¼ˆ`transparent` å…³é—­ï¼‰ |
| `--home-chart-line-shadow-blur` | æŠ˜çº¿é˜´å½±æ¨¡ç³Šï¼ˆçº¯æ•°å­—ï¼Œæ— å•ä½ï¼‰ |
| `--home-chart-line-shadow-offset-y` | æŠ˜çº¿é˜´å½± Y åç§»ï¼ˆçº¯æ•°å­—ï¼‰ |

#### é¦–é¡µä»ªè¡¨ç›˜

| å˜é‡ | è¯´æ˜ |
|---|---|
| `--home-chart-gauge-axis-line` | ä»ªè¡¨ç›˜è½´çº¿è‰² |
| `--home-chart-gauge-empty` | ä»ªè¡¨ç›˜ç©ºæ€è‰² |
| `--home-chart-gauge-over-limit` | è¶…æ”¯è‰² |
| `--home-chart-gauge-normal` | æ­£å¸¸è‰² |
| `--home-chart-gauge-title` | ä»ªè¡¨ç›˜æ ‡é¢˜è‰² |
| `--home-chart-gauge-detail` | ä»ªè¡¨ç›˜è¯¦æƒ…è‰² |
| `--home-chart-gauge-detail-amount` | ä»ªè¡¨ç›˜é‡‘é¢è‰² |
| `--home-chart-gauge-empty-title` | ç©ºä»ªè¡¨ç›˜æ ‡é¢˜è‰² |
| `--home-chart-gauge-empty-detail` | ç©ºä»ªè¡¨ç›˜è¯¦æƒ…è‰² |

#### é¦–é¡µçƒ­åŠ›å›¾

| å˜é‡ | è¯´æ˜ |
|---|---|
| `--home-heatmap-level-1` ~ `--home-heatmap-level-10` | çƒ­åŠ›å›¾ 10 çº§è‰²é˜¶ |

#### è´¦æœ¬é¡µ

| å˜é‡ | è¯´æ˜ |
|---|---|
| `--books-default-color` | è´¦æœ¬é»˜è®¤è‰² |
| `--books-score-palette` | è¯„åˆ†ç¯é…è‰²ï¼ˆé€—å·åˆ†éš”çš„è‰²å€¼åˆ—è¡¨ï¼‰ |
| `--books-ring-shadow-fallback` | è¯„åˆ†ç¯é˜´å½±å¤‡ç”¨è‰² |

### 5.3 ç»„ä»¶çº§è¦†ç›–ï¼ˆå¯é€‰ï¼‰

æ·±è‰²ä¸»é¢˜é€šå¸¸è¿˜éœ€è¦è¦†ç›– Element Plus ç»„ä»¶æ ·å¼ã€‚ä»¥ä¸‹æ˜¯å†…ç½® dark ä¸»é¢˜çš„åšæ³•ï¼Œå¯ç›´æ¥å¤åˆ¶åè°ƒè‰²ï¼š

#### Element Plus æŒ‰é’®

å¯¹ `primary / success / warning / danger / info` äº”ç§ç±»å‹ï¼Œåˆ†åˆ«è¦†ç›–æŒ‰é’®çš„èƒŒæ™¯ã€è¾¹æ¡†ã€æ–‡æœ¬è‰²ï¼š

```css
html[data-theme='your-theme-id'] .el-button--primary {
    --el-button-bg-color: ...;
    --el-button-border-color: ...;
    --el-button-text-color: ...;
    --el-button-hover-bg-color: ...;
    --el-button-hover-border-color: ...;
    --el-button-hover-text-color: ...;
    --el-button-active-bg-color: ...;
    --el-button-active-border-color: ...;
    --el-button-active-text-color: ...;
}
/* åŒç† success / warning / danger / info */
```

Disabled çŠ¶æ€ï¼š

```css
html[data-theme='your-theme-id'] .el-button--primary.is-disabled,
html[data-theme='your-theme-id'] .el-button--primary.is-disabled:hover {
    --el-button-disabled-bg-color: ...;
    --el-button-disabled-border-color: ...;
    --el-button-disabled-text-color: ...;
}
```

#### Element Plus è¡¨æ ¼

```css
html[data-theme='your-theme-id'] .el-table {
    --el-table-bg-color: transparent;
    --el-table-tr-bg-color: transparent;
    --el-table-header-bg-color: transparent;
    --el-table-header-text-color: var(--table-header-text-color);
    --el-table-row-hover-bg-color: var(--table-row-hover-bg-color);
    --el-text-color-regular: var(--table-text-color-regular);
    --el-text-color-primary: var(--table-text-color-primary);
}
```

#### é¦–é¡µ box-card

```css
html[data-theme='your-theme-id'] .box-card,
html[data-theme='your-theme-id'] .el-card.mb-3 {
    background-color: var(--home-box-card-bg-color) !important;
    background-image: var(--home-box-card-bg-image) !important;
    border: var(--home-box-card-border) !important;
}
```

å„ä¸šåŠ¡é¡µé¢ä¸»å¡ç‰‡ / ç‰¹æ®Šç»„ä»¶çš„é€‰æ‹©å™¨é€ŸæŸ¥ï¼š

| é¡µé¢ | ä¸»å¡ç‰‡é€‰æ‹©å™¨ | è¯´æ˜ |
|---|---|---|
| é¦–é¡µ | `.box-card` | é…åˆ `--home-box-card-*` å˜é‡ |
| ç»Ÿè®¡/è®°è´¦/è§„åˆ™/åˆ†ç±»/è´¦æœ¬ç®¡ç† | `.el-card.mb-3` | å„ä¸šåŠ¡é¡µçš„å”¯ä¸€ä¸»å¡ç‰‡ |
| è´¦æœ¬ç®¡ç† â–¸ å³ä¾§é¢åº¦æ±‡æ€»å¡ | `.quota-card` | ç‹¬ç«‹ divï¼Œä¸æ˜¯ el-card |
| è´¦æœ¬ç®¡ç† â–¸ å³ä¾§ç¯å½¢è¯„åˆ†é¢æ¿ | `.score-panel` | ç‹¬ç«‹ divï¼Œéœ€æ‰‹åŠ¨è¡¥ `border-radius` |

> âš ï¸ `.quota-card` å’Œ `.score-panel` æ˜¯æ™®é€š `div`ï¼Œ**ä¸ä¼š**è¢« `.el-card { border-radius }` çš„è§„åˆ™è¦†ç›–ï¼Œè‹¥ä¸»é¢˜è¦æ±‚ç»Ÿä¸€åœ†è§’/æ–¹è§’ï¼Œéœ€å•ç‹¬å£°æ˜ã€‚

> æµ…è‰²ä¸»é¢˜é€šå¸¸ä¸éœ€è¦ç»„ä»¶è¦†ç›–ï¼ˆElement Plus é»˜è®¤å°±æ˜¯æµ…è‰²é£æ ¼ï¼‰ã€‚

### 5.4 å·²çŸ¥ style.css å…¨å±€æ ·å¼è¦†ç›–å†²çª

`style.css` ä¸­æœ‰è‹¥å¹²å¤„ä½¿ç”¨äº†**ç¡¬ç¼–ç é¢œè‰² + `!important`**ï¼Œå³ä¾¿ä¸»é¢˜æ­£ç¡®è®¾ç½®äº† CSS å˜é‡ï¼Œä¹Ÿä¼šè¢«è¿™äº›è§„åˆ™è¦†ç›–å›å»ã€‚

#### è¡¨æ ¼å›ºå®šåˆ—èƒŒæ™¯ï¼ˆæœ€å¸¸è§ï¼‰

```css
/* style.cssï¼ˆä¸å¯ä¿®æ”¹ï¼‰*/
.el-table .el-table__cell.el-table-fixed-column--left,
.el-table .el-table__cell.el-table-fixed-column--right {
    background-color: rgba(255, 255, 255, 0.88) !important;
}
.el-table__body tr:hover > td.el-table-fixed-column--left,
.el-table__body tr:hover > td.el-table-fixed-column--right {
    background-color: rgba(255, 255, 255, 0.95) !important;
}
```

**åœ¨ `theme.css` ä¸­ç”¨æ›´å…·ä½“çš„é€‰æ‹©å™¨è¦†ç›–ï¼š**

```css
html[data-theme='your-theme-id'] .el-table .el-table__cell.el-table-fixed-column--left,
html[data-theme='your-theme-id'] .el-table .el-table__cell.el-table-fixed-column--right {
    background-color: <ä¸»é¢˜åº•è‰²ï¼Œå»ºè®®ä¸é€æ˜> !important;
}
html[data-theme='your-theme-id'] .el-table__body tr:hover > td.el-table-fixed-column--left,
html[data-theme='your-theme-id'] .el-table__body tr:hover > td.el-table-fixed-column--right {
    background-color: <hover è‰²> !important;
}
```

#### è¡¨æ ¼æ¡çº¹è¡Œï¼ˆstripeï¼‰

```css
/* style.cssï¼ˆä¸å¯ä¿®æ”¹ï¼‰*/
.el-table--striped .el-table__body tr.el-table__row--striped td.el-table__cell {
    background: transparent;
}
```

æ·±è‰²/æœ‰è‰²ä¸»é¢˜ä¸‹éœ€è¦†ç›–ï¼Œä¸”æ¡çº¹è¡Œä¸å›ºå®šåˆ—å åŠ æ—¶è¦å•ç‹¬å¤„ç†ï¼š

```css
html[data-theme='your-theme-id'] .el-table--striped .el-table__body
    tr.el-table__row--striped td.el-table__cell {
    background-color: <æ¡çº¹è¡Œåº•è‰²> !important;
}
/* æ¡çº¹è¡Œ + å›ºå®šåˆ—å åŠ â€”â€”å¿…é¡»å•ç‹¬è¦†ç›–ï¼Œå¦åˆ™ç™½è‰²ç©¿é€ */
html[data-theme='your-theme-id'] .el-table--striped .el-table__body
    tr.el-table__row--striped td.el-table-fixed-column--left,
html[data-theme='your-theme-id'] .el-table--striped .el-table__body
    tr.el-table__row--striped td.el-table-fixed-column--right {
    background-color: <ä¸æ¡çº¹è¡Œç›¸åŒçš„åº•è‰²> !important;
}
```

> [!TIP]
> **è·¨é¡µé¢è¡¨æ ¼ä¸€è‡´æ€§**ï¼šæŠŠ `--el-table-bg-color` / `--el-table-tr-bg-color` è®¾ä¸º**ä¸é€æ˜çš„å›ºå®šé¢œè‰²**ï¼ˆè€Œé `transparent`ï¼‰ï¼Œå¯é¿å…å› ä¸‰ä¸ªé¡µé¢å®¹å™¨èƒŒæ™¯ä¸åŒï¼ŒåŠé€æ˜å›ºå®šåˆ—"é€"å‡ºä¸åŒåº•è‰²ã€‚

### 5.5 åŠ¨æ€èƒŒæ™¯å®ç°æŒ‡å—

ä¸»é¢˜åŒ…ä¸å…è®¸æ³¨å…¥ JSï¼Œçº¯ CSS åŠ¨æ€èƒŒæ™¯é€šè¿‡ `body::before`ï¼ˆåº•å±‚å…‰æ™•ï¼‰+ `body::after`ï¼ˆç²’å­/æ•°æ®æµï¼‰åŒå±‚ä¼ªå…ƒç´ å®ç°ï¼Œå¯å‚è€ƒ `themes/cosmos/theme.css`ã€‚

#### âš ï¸ å…³é”®å‰æï¼šbody å¿…é¡»è®¾ä¸º `background-color: transparent`

è‹¥ `body` æœ‰èƒŒæ™¯è‰²ï¼Œä¼šé®æŒ¡ `z-index: -1` çš„ `body::after`ï¼Œå¯¼è‡´åŠ¨æ€æ•ˆæœå®Œå…¨ä¸å¯è§ï¼š

```css
html[data-theme='your-theme-id'] body {
    background-color: transparent; /* å¿…é¡»ï¼åº•è‰²æ”¾å…¥ ::before */
    background-image: repeating-linear-gradient(...); /* æ‰«æçº¿ç­‰è´´å›¾ä¿ç•™ */
}
```

#### æ ‡å‡†åŒå±‚æ¶æ„

```css
@keyframes bgPulse { /* å…‰æ™•ä½ç½®ç¼“ç§» + opacity å‘¼å¸ */ }
@keyframes particleDrift { /* ç²’å­æ¼‚ç§»æˆ–ä¸‹è½ */ }

/* ç¬¬ä¸€å±‚ï¼šåº•è‰² + å¤§é¢ç§¯å…‰æ™•æ¸¸èµ° */
html[data-theme='your-theme-id'] body::before {
    content: ""; position: fixed; inset: 0; z-index: -2;
    background-image:
        radial-gradient(ellipse at 85% 8%, <ä¸»è‰²æ™•> 0%, transparent 45%),
        linear-gradient(<åº•è‰²>); /* åº•è‰²æ”¾åœ¨æœ€åä¸€å±‚ */
    background-size: 200% 200%;
    animation: bgPulse 18s ease-in-out infinite;
    pointer-events: none;
}

/* ç¬¬äºŒå±‚ï¼šç²’å­ / æ•°æ®æµï¼ˆbackground-repeat: no-repeat ä½¿æ¯ç²’ç‹¬ç«‹ï¼‰ */
html[data-theme='your-theme-id'] body::after {
    content: ""; position: fixed; inset: 0; z-index: -1;
    background-image:
        radial-gradient(<ç²’å­å°ºå¯¸> at <x> <y>, <é¢œè‰²>, transparent),
        /* é‡å¤ N ä¸ªç²’å­ */;
    background-size: <px> <px>, /* æ¯ç²’å¤§å°ï¼Œä¸€ä¸€å¯¹åº” */;
    background-repeat: no-repeat;
    animation: particleDrift 20s linear infinite;
    pointer-events: none;
}
```

#### ç²’å­é£˜è½æŠ€å·§

åœ¨ `@keyframes` çš„ `0%` å¸§é‡Œï¼Œå„ç²’å­ä» `-5% ~ -35%` ä¸åŒé«˜åº¦å‡ºå‘ï¼Œ`100%` å¸§ç»Ÿä¸€åˆ° `110%`ï¼Œè·¯ç¨‹ä¸åŒ â†’ é€Ÿåº¦å„å¼‚ â†’ è§†è§‰ä¸Šé”™è½æœ‰è‡´ï¼›å¾ªç¯è·³å›ç‚¹åœ¨å±å¹•å¤–ï¼Œç”¨æˆ·æ„ŸçŸ¥ä¸åˆ°ï¼š

```css
@keyframes fall {
    0%   { background-position: 12% -5%, 35% -20%, 60% -35%; }
    25%  { background-position: 9%  22%, 38%  15%, 57%   8%; } /* x å¾®ç§»æ¨¡æ‹Ÿé£å¹ */
    100% { background-position: 13% 110%, 34% 110%, 61% 110%; }
}
```

> [!NOTE]
> æµ…è‰²ä¸»é¢˜å…‰æ™•é€æ˜åº¦å»ºè®® `0.08~0.20`ï¼Œç²’å­ `3~8px`ï¼›æ·±è‰²/éœ“è™¹ä¸»é¢˜å¯åŠ å¼ºè‡³ `0.3~0.6`ã€`6~20px`ã€‚

> [!CAUTION]
> ç¡®ä¿ `pointer-events: none`ï¼Œé¿å…åŠ¨æ€èƒŒæ™¯æ‹¦æˆªé¼ æ ‡äº‹ä»¶ã€‚åŠ¨ç”»è¿‡å¤æ‚æ—¶ï¼Œå¯é€šè¿‡åŠ é•¿ `animation-duration` é™ä½ GPU å‹åŠ›ã€‚


## 6. æ‰§è¡Œæµç¨‹

1. åœ¨ `static/themes/` æ–°å»ºä¸»é¢˜ç›®å½•ã€‚
2. å†™ `manifest.json`ã€‚
3. å†™ `theme.css`ï¼šå…ˆå¤åˆ¶ `themes/light/theme.css`ï¼ˆæµ…è‰²ï¼‰æˆ– `themes/dark/theme.css`ï¼ˆæ·±è‰²ï¼‰ä½œä¸ºæ¨¡æ¿ï¼Œå†é€é¡¹è°ƒè‰²ã€‚
4. å¯åŠ¨é¡¹ç›®éªŒè¯ï¼š`python app.py`
5. è®¿é—®ä»¥ä¸‹é¡µé¢å¹¶åœ¨å·¦ä¸Šè§’åˆ‡æ¢ä¸»é¢˜ç¡®è®¤æ•ˆæœï¼š
   - `/` (é¦–é¡µ)
   - `/statistics` (ç»Ÿè®¡åˆ†æ)
   - `/tagging` (æ–°å¢è®°è´¦)
   - `/rules` (è§„åˆ™ç®¡ç†)
   - `/categories` (åˆ†ç±»ç®¡ç†)
   - `/books` (è´¦æœ¬ç®¡ç†)

## 7. éªŒæ”¶æ¸…å•

- [ ] å·¦ä¸Šè§’å¯åˆ‡æ¢åˆ°æ–°ä¸»é¢˜
- [ ] åˆ·æ–°åä¸»é¢˜ä¿æŒä¸å˜
- [ ] æ·±è‰²ä¸»é¢˜ä¸‹ `html.dark` class å­˜åœ¨ï¼Œæµ…è‰²ä¸‹ä¸å­˜åœ¨
- [ ] é¦–é¡µ 4 ä¸ªç»Ÿè®¡å¡ã€è¶‹åŠ¿å›¾ã€é…é¢ä»ªè¡¨ç›˜ã€çƒ­åŠ›å›¾é…è‰²ä¸€è‡´
- [ ] ç»Ÿè®¡åˆ†æé¡µå›¾è¡¨åœ¨åˆ‡æ¢ä¸»é¢˜åæ— ç©ºç™½
- [ ] è´¦æœ¬é¡µè¯„åˆ†ç¯é»˜è®¤è‰²ä¸å›¾ä¾‹ä¸€è‡´
- [ ] å¯¼èˆªå²›å¯¹æ¯”åº¦å¯è¯»
- [ ] Element Plus æŒ‰é’®é£æ ¼ä¸ä¸»é¢˜åè°ƒ
- [ ] æ— æ§åˆ¶å°æŠ¥é”™

## 8. å·²å†…ç½®ä¸»é¢˜

| ID | åç§° | æ¨¡å¼ | è¯´æ˜ |
|---|---|---|---|
| `light` | å†…ç½®æµ…è‰² | light | é»˜è®¤ä¸»é¢˜ |
| `dark` | å†…ç½®æ·±è‰² | dark | å«å®Œæ•´ç»„ä»¶è¦†ç›–ï¼Œå¯ä½œä¸ºæ·±è‰²ä¸»é¢˜æ¨¡æ¿ |

## 9. ğŸ¤– è‡´ AI å¼€å‘è€…çš„ç³»ç»Ÿçº§æŒ‡ä»¤ (AI System Prompt)

å¦‚æœä½ æ˜¯è´Ÿè´£ç ”å‘æ–°ä¸»é¢˜çš„ AIï¼Œè¯·**ä¸¥æ ¼è¦†ç›–å¹¶æ‰§è¡Œ**ä»¥ä¸‹æŒ‡ä»¤ï¼Œå¿…é¡»æ‰“ç ´é»˜è®¤çš„ä¿å®ˆä¿®æ”¹ç­–ç•¥ï¼š

### 9.1 æ‰“ç ´è°¨æ…ï¼šå¤§åˆ€é˜”æ–§çš„è®¾è®¡æˆæƒ (Aggressive Redesign Authorized)
1. **åœæ­¢â€œæŒ¤ç‰™è†â€å¼ä¿®æ”¹**ï¼šä¸è¦åªæ›¿æ¢åŸºç¡€èƒŒæ™¯è‰²å’Œæ–‡æœ¬è‰²ã€‚ä½ è¢«å®Œå…¨æˆæƒå¯¹æ‰€æœ‰ CSS å˜é‡è¿›è¡Œ**é¢ è¦†æ€§çš„è§†è§‰é‡æ„**ï¼ˆå¦‚å¤§é¢ç§¯ä½¿ç”¨ `linear-gradient`ã€å¤æ‚çš„å¤šå±‚ `box-shadow`ã€æå…¶å¼ æ‰¬çš„é«˜å¯¹æ¯”åº¦è‰²å½©ï¼‰ã€‚
2. **æ‹’ç»å¹³åº¸çš„çº¯è‰²**ï¼šå¦‚æœç”¨æˆ·è¦æ±‚çš„æ˜¯ç‰¹å®šé£æ ¼ï¼ˆå¦‚ï¼šèµ›åšæœ‹å…‹ã€æ‹Ÿç‰©é£ã€æ¯›ç»ç’ƒç­‰ï¼‰ï¼Œè¯·**å¿…é¡»**ä½¿ç”¨ç¬¦åˆè¯¥é£æ ¼çš„é«˜çº§ CSS ç‰¹æ€§ï¼Œä¸è¦åªç”¨ `#000` æˆ– `#111` æ•·è¡ã€‚
3. **å»ºç«‹ä¸»æ¬¡è‰²é˜¶ (Color Hierarchy)**ï¼šåœ¨ç€æ‰‹ä¿®æ”¹å‰ï¼Œå…ˆåœ¨ä½ çš„ `Thought` ä¸­æƒ³æ¸…æ¥šè¯¥ä¸»é¢˜çš„ 1 ä¸ªä¸»è‰² (Primary)ã€2 ä¸ªè¾…åŠ©è‰² (Secondary) ä»¥åŠå®ƒä»¬å¯¹åº”çš„ Hover/Active å˜ä½“ï¼Œå¹¶ä¸¥æ ¼å‘ä¸‹è´¯å½»ã€‚

### 9.2 è¾¹ç¼˜ç»†èŠ‚é˜²æ¼æ¸…å• (Edge-case Checklist)
AI åœ¨ç”Ÿæˆä¸»é¢˜æ—¶å®¹æ˜“é—æ¼ä»¥ä¸‹è§†è§‰æ­»è§’ï¼Œè¯·é€ä¸€æ ¸å¯¹å¹¶é‡å†™è¿™äº›å˜é‡ï¼Œå¦åˆ™å°†è§†ä¸ºç ”å‘å¤±è´¥ï¼š

- [ ] **æ‚¬åœä¸äº¤äº’åé¦ˆ (Hover/Active)**
  - æŒ‰é’®çš„ `hover` å’Œ `active` çŠ¶æ€æ˜¯å¦é…ç½®äº†åˆç†çš„äº®åº¦å˜åŒ–æˆ–é€æ˜åº¦ï¼Ÿ
  - è¡¨æ ¼è¡Œçš„ `hover` èƒŒæ™¯è‰²ï¼ˆ`--table-row-hover-bg-color`ï¼‰æ˜¯å¦ä¸æ•´ä½“èƒŒæ™¯åè°ƒï¼Œä¸”ä¸ä¼šé®æŒ¡æ–‡å­—ï¼Ÿ
  - å¯¼èˆªå²›çš„ä¸»é¢˜åˆ‡æ¢æŒ‰é’®çš„ `hover` é˜´å½±ï¼ˆ`--island-theme-hover-shadow`ï¼‰æ˜¯å¦ç”Ÿæ•ˆï¼Ÿ
  
- [ ] **â€œç©ºçŠ¶æ€â€ä¸æ·±å±‚æ–‡æœ¬ (Empty States & Muted Text)**
  - é¦–é¡µæ²¡æ•°æ®æ—¶çš„â€œç©ºçŠ¶æ€æ–‡æœ¬è‰²â€ï¼ˆ`--home-empty-text`ã€`--home-heatmap-empty-text`ï¼‰æ˜¯å¦èƒ½çœ‹æ¸…ï¼Ÿä¸è¦è®©å®ƒå’ŒèƒŒæ™¯è‰²èä¸ºä¸€ä½“ã€‚
  - ECharts å›¾è¡¨å’Œæ—¥å†çš„ Tooltipï¼ˆæç¤ºæ¡†ï¼‰èƒŒæ™¯å’Œè¾¹æ¡†æ˜¯å¦å·²ç»é‡æ–°é€‚é…äº†å½“å‰ä¸»é¢˜ï¼Ÿï¼ˆç‰¹åˆ«æ˜¯æš—è‰²ä¸»é¢˜ä¸‹ï¼Œåƒä¸‡åˆ«å¼¹å‡ºä¸ªç™½è‰²çš„ Tooltip åˆºçç”¨æˆ·çš„çœ¼ï¼‰ã€‚
  
- [ ] **è¾¹æ¡†ä¸åˆ†å‰²çº¿ (Borders & Dividers)**
  - è¡¨æ ¼è¾¹æ¡†ã€é¦–é¡µå„ä¸ªå¡ç‰‡çš„è¾¹æ¡†ï¼ˆ`--home-box-card-border`ï¼‰ã€ä»¥åŠå›¾è¡¨çš„åæ ‡è½´çº¿ï¼ˆ`--home-chart-axis-line-color`ï¼‰ï¼Œæ˜¯å¦æ­£ç¡®æ”¹æˆäº†å…·æœ‰ä¸€ç‚¹é€æ˜åº¦çš„å½“å‰ä¸»é¢˜é€‚é…è‰²ï¼Ÿï¼ˆä¸è¦ç”¨ç”Ÿç¡¬çš„ `solid #ccc`ï¼‰ã€‚

- [ ] **Element Plus ç»„ä»¶æ·±åº¦è¦†ç›–**
  - æ·±è‰²æ¨¡å¼ä¸‹ï¼Œæ˜¯å¦å·²ç»å½»åº•åœ¨ `theme.css` åº•å±‚è¦†ç›–äº† `.el-button` çš„æ‰€æœ‰çŠ¶æ€ï¼Ÿ
  - æ·±è‰²æ¨¡å¼ä¸‹ï¼Œæ˜¯å¦å·²ç»æ¸…æ´—äº† `.el-table` çš„åŸç”Ÿç™½è‰²èƒŒæ™¯ï¼ˆå°†ç›¸å…³é…ç½®è®¾ä¸º `transparent` å¹¶è¦†ç›–æ–‡å­—è‰²ï¼‰ï¼Ÿ

- [ ] **æ ·å¼ä¸€è‡´æ€§**
  - é¡µé¢ç›¸åŒå…ƒç´ ï¼ˆå¦‚æŒ‰é’®ã€è¡¨æ ¼ã€å¡ç‰‡ã€å¼¹çª—ç­‰ï¼‰åœ¨ä¸åŒé¡µé¢ï¼ˆé¦–é¡µã€ç»Ÿè®¡åˆ†æé¡µã€è´¦æœ¬é¡µã€åˆ†ç±»é¡µã€è§„åˆ™é¡µ ç­‰ç­‰ï¼‰çš„æ ·å¼æ˜¯å¦ä¸€è‡´ï¼Ÿ

- [ ] **åŠ¨ç”»æ•ˆæœ**
  - é¡µé¢å„ä¸ªå…ƒç´ æ˜¯å¦å…·æœ‰åˆç†çš„åŠ¨ç”»æ•ˆæœï¼Ÿ
  - åŠ¨ç”»æ•ˆæœæ˜¯å¦ä¸ä¸»é¢˜é£æ ¼ä¸€è‡´ï¼Ÿ
  - æ•´ä½“èƒŒæ™¯æ˜¯å¦å…·æœ‰åŠ¨æ€æ•ˆæœï¼Ÿï¼ˆå¯ä»¥å‚è€ƒç°æœ‰æ˜Ÿç©ºä¸»é¢˜çš„åšæ³•ï¼‰
  